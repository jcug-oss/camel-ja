# camel-ja 翻訳プロジェクト レビューガイド

camel-ja 翻訳プロジェクトでは、翻訳対象ドキュメントからテキストを抽出し、翻訳ファイル（.poファイル）の形式にしたものを
gitで管理しています。レポジトリはGitHubでホスティングしており、新しく翻訳したテキストは、GitHubのレポジトリに対して
Pull Request（変更提案）として送信され、レビュアーによるレビューを経てレポジトリに取り込まれます。
本ガイドでは、レビュアーがレビュー時に行う具体的な手順を解説します。

## レビュー手順

### Pull Requestを開く

Pull Requestの一覧は、 [プロジェクトページ](https://github.com/jcug-oss/camel-ja) の"Pull Requests"タブから
表示することが可能です。一覧からPull Requestを選択し、Pull Requestページを開いてください。
Pull Requestページには、いくつかのサブタブが存在します。

### Conversation タブ

"Conversation"タブには、Pull Requestの説明およびコメントが表示されます。
Pull Requestに基づいてプレビューサイトがビルドされると、こちらにURLのリンクが追加されますので、
レビュー時はこちらのリンクからプレビューを確認してください。

### Files Changed タブ

"Files Changed"タブには、そのPull Requestでの行われた変更が表示されます。.poファイルが生のテキストファイルとして表示されます。
タブメニューの歯車ボタンから、1カラム表示の中で変更点を表示する"Unified"ビューと、
左右2カラム表示の中で変更前・変更後の形式で変更点を表示する"Split"ビューで切り替えることが可能です。


### インラインコメントの追加

修正内容について議論したい場合（専門用語の訳し方について適切かどうか等）、
Files Changedタブの各行に対してコメントをつけることが出来ます。
Files Changedタブのコメントをつけたい行にマウスオーバーすると、左側に青い「＋」ボタンが表示されますので、
そちらを押下して開いた入力フォームにコメントを記述して下さい。
送信ボタンは、"Add single comment"と"Start a review"の2個がありますが、"Add single comment"ボタンは単一のコメントとして追加し、
"Start a review"ボタンは、複数のコメントをまとめて送信する為に、一旦Pending状態でコメントを保存するものです。

### 変更提案コメントの追加

訳文に修正が必要で修正の提案を行いたい場合、修正したい行で左側の青い「＋」ボタンからインラインコメントの入力フォームを開き、
入力フォームメニューの「±」ボタンを押下して下さい。対象行に対する修正を提案するコメント記法が自動挿入されますので、
訳文を修正して送信してください。

![変更提案コメントフォーム](internal/docs/images/suggestion-comment-form.png)

### 変更提案コメントの反映

変更提案コメントは、以下のように表示され、"Commit suggestion"ボタンを押すことで、Pull Requestに対してその場で変更を反映させることが出来ます。

![変更提案コメントフォーム](internal/docs/images/suggestion-comment.png)

議論の余地なく修正して構わないと思われる内容は、変更の反映を行ってください。
"Add suggestion to batch"ボタンは、変更の適用をまとめて一つのコミットで行う為のボタンです。

### レビューの完了

右上の"Review changes"ボタン（もしくは"Finish your review"ボタン）を押下すると、コメント欄が開き、
レビュー結果として承認するか、修正を要求するかコメントすることが出来ます。
Pending状態のコメントがある場合は、このタイミングでまとめて追加が行われます。

### マージ

レビューが完了し、レポジトリに取り込んで問題ないと判断出来たら、"Conversation"タブの下部、"Merge pull request"ボタンを
押下し、マージを行ってください。マージが行われると、マージ先がmasterブランチの場合は、サイトのビルドが開始され、
10分程度でサイトに反映が行われます。

## Tips

### Pull Requestをレビュー時にローカルで修正したい場合

レビュアーとしてレビューしているPull Requestに対して、ローカルで直接修正してしまいたい場合は、
`gh`コマンドでローカルにPull Requestのブランチをチェックアウトして修正し、
新しいPull Requestとして作り直すことで修正を行うことも可能です。
コマンドラインでの作業に慣れている場合はお試しください。
`gh`コマンドの [インストール手順](https://github.com/cli/cli#installation) に従いインストールを行い、
Pull Requestページの"Open with"ボタンから開く、"GitHub CLI"でのチェックアウト手順に従いチェックアウトを行ってください。


