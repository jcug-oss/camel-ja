# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2021-05-18 09:36+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: preview
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:1
#, no-wrap
msgid "Details of what we have done in the Camel 3.6 release."
msgstr ""

#. type: YAML Front Matter: title
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:1
#, no-wrap
msgid "Apache Camel 3.6 What's New"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:10
#, no-wrap
msgid "Apache Camel 3.6 has just been released.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:13
#, no-wrap
msgid ""
"This is a non-LTS release which means we will not provide patch releases but use the release _as-is_.\n"
"The next planned LTS release is 3.7 scheduled towards the end of the year.\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:15
#, no-wrap
msgid "So what's in this release?"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:18
#, no-wrap
msgid "This release introduces a set of new features and noticeable improvements that we will cover in this blog post.\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:20
#, no-wrap
msgid "Spring Boot"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:24
#, no-wrap
msgid ""
"We have upgraded to the latest release at this time which is Spring Boot 2.3.4.\n"
"Support for Spring Boot 2.4 is planned for Camel 3.7.\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:26
#, no-wrap
msgid "Optimizations"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:29
#, no-wrap
msgid "To speed up the startup we switched to a new UUID generator. The old (classic) generator was inherited from Apache ActiveMQ which needed to ensure its ids were unique in a network of brokers, and therefore to ensure this the generator was using the hostname as the prefix in the id. This required on startup to do network access to obtain this information which costs a little time. Also depending on networks this can be more restrictive and delay the startup. The new generator is a pure in-memory fast generator that was used by Camel K and Camel Quarkus.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:31
#, no-wrap
msgid "We also identified a few other spots during route initialization. For example, one small change was to avoid doing some regular expression masking on route endpoints which weren't necessary anymore.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:33
#, no-wrap
msgid "Now the bigger improvements are in the following areas\n"
msgstr ""

#. type: Title ####
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:34
#, no-wrap
msgid "Avoid throwing exceptions"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:37
#, no-wrap
msgid "We identified on spring runtimes that Camel would query the spring bean registry for known beans by id, which the Spring framework would throw a NoSuchBeanDefinitionException if the bean is not present. As Camel does a bit of optional bean discovery during bootstrap, we found a way to avoid this which prevents this.\n"
msgstr ""

#. type: Title ####
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:38
#, no-wrap
msgid "Singleton languages"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:41
#, no-wrap
msgid "Another related problem is that in Camel 3 due to the modularization then some of the languages (bean, simple, and others) have been changed from being a singleton to prototype scoped. This is one of the biggest problems and we had a Camel user report a problem with thread contention in a high concurrent use-case would race for resolving languages (they are prototype scoped). So you would have this problem, and because the language resolver would query the registry first then Spring would throw `NoSuchBeanDefinitionException`, and then Camel would resolve the language via its own classpath resolver. So all together this cost performance. We can see this in the screenshots from the profiler in the following.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:43
#, no-wrap
msgid "{{< image \"350-blocked.png\" \"Camel 3.5 Blocked Threads\" >}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:45
#, no-wrap
msgid "{{< image \"360-blocked.png\" \"Camel 3.6 Blocked Threads\" >}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:47
#, no-wrap
msgid "The top screenshot is using Camel 3.5 and the bottom 3.6. At the top, we can see the threads are blocked in Camel's `resolveLanguage` method. And in 3.6 then it's the log4j logger that is blocking for writing to the log file. Both applications are using the same Camel application and have been running for about 8 minutes.\n"
msgstr ""

#. type: Title ####
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:48
#, no-wrap
msgid "Reduce object allocations"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:51
#, no-wrap
msgid "The next screenshots are showing a sample of the object allocations.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:53
#, no-wrap
msgid "{{< image \"350-allocations.png\" \"Camel 3.5 Average Object Allocations Per Seconds\" >}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:55
#, no-wrap
msgid "{{< image \"360-allocations.png\" \"Camel 3.6 Average Object Allocations Per Seconds\" >}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:58
#, no-wrap
msgid "With Camel 3.5 we are average about 1000 obj/sec and with 3.6 we are down to about a 1/3th.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:60
#, no-wrap
msgid "One of the improvements to help reduce the object allocations was how parameters to languages was changed from using a Map to a plain object array. The Map takes up more memory and object allocations than a single fixed object array. \n"
msgstr ""

#. type: Title ####
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:61
#, no-wrap
msgid "Do as much init as possible"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:64
#, no-wrap
msgid "Another performance improvement that aids during runtime was that we moved as much we could from the evaluation to the initialization phase in the Camel languages (simple, bean, etc.). We did this by introducing the init phase and ensuring CamelContext was carried around in the interns so we can use the context during the init phase, where its really needed. This ensures the runtime evaluation is as fast as possible.\n"
msgstr ""

#. type: Title ####
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:65
#, no-wrap
msgid "Other smaller optimizations"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:68
#, no-wrap
msgid "We also improved the simple language to be a bit smarter in its binary operators (such as header.foo > 100). Now the simple language has stronger types for numeric and boolean types during its parsing, which allows us to know better from the right and left hand side of the binary operator to do type coercion so the types are comparable by the JVM. Before we may end up with falling back to converting to string types on both sides. And there is more to come, I have some ideas how to work on a compiled simple language.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:70
#, no-wrap
msgid "The screenshots below show a chart with the CPU, object allocations, and thrown exceptions.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:72
#, no-wrap
msgid "{{< image \"350-performance.png\" \"Camel 3.5 Performance Charts\" >}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:74
#, no-wrap
msgid "{{< image \"360-performance.png\" \"Camel 3.6 Performance Charts\" >}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:77
#, no-wrap
msgid "As we can see this summarise what was mentioned was done to optimize. The number of exceptions has been reduced to 0 at runtime. There is about 3500 thrown during bootstrap (that is Java JAXB which is used for loading the spring XML file with the Camel routes used for the sample application). We do have a fast XML loader in Camel that is not using JAXB.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:79
#, no-wrap
msgid "Another improvement we did was to build a source code generator for a new `UriFactory` which allows each component to quickly build dynamic endpoint URIs from a `Map` of parameters. The previous solution was to use `RuntimeCamelCatalog` that was more generic and required loading component metadata from JSON descriptor files. A few components use this to optimize the `toD` (such as HTTP components). By this change, we avoid the runtime catalog as a dependency (reduce JAR size) and the source code generated URI factory is much faster (its speedy plain Java). However, the sample application used for this blog did not use `toD` nor the `UriFactory`.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:81
#, no-wrap
msgid "Source from [external blog post](http://www.davsclaus.com/2020/10/apache-camel-36-more-camel-core.html)\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:83
#, no-wrap
msgid "API Components overhaul"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:86
#, no-wrap
msgid "There are several API based components which are source code generated from _external API_. We have overhauled\tthe code generator which now scrapes and includes documentation and keep the documentation up to date as well.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:88
#, no-wrap
msgid "Also, we include additional metadata for Camel tooling so they can provide code assistance when Camel end-users are using these API based components. Some of those external APIs are huge and you can have hundreds of APIs.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:90
#, no-wrap
msgid "The API based components are: [AS2](/components/latest/as2-component.html), [Box](/components/latest/box-component.html), [Braintree](/components/latest/braintree-component.html), [FHIR](/components/latest/fhir-component.html), Google [Calendar](/components/latest/google-calendar-component.html)/[Drive](/components/latest/google-drive-component.html)/[Mail](/components/latest/google-mail-component.html)/[Sheets](/components/latest/google-sheets-component.html), [Olingo](/components/latest/olingo4-component.html), [Twillio](/components/latest/twilio-component.html), and [Zendesk](/components/latest/zendesk-component.html).\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:92
#, no-wrap
msgid "Reduce reflection"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:95
#, no-wrap
msgid "Yet another release where we reduced using reflections in a few spots in Camel core and in some of the components.\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:97
#, no-wrap
msgid "Language precompilation"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:101
#, no-wrap
msgid ""
"As mentioned in the optimization section we moved initialization of languages to an earlier phase.\n"
"Camel now pre compile languages when its applicable, for example JSonPath, and XPath language.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:104
#, no-wrap
msgid ""
"And speaking of pre-compiled languages then Camel 3.7 introduces the [jOOR language](/components/latest/languages/joor-language.html)\n"
"to use runtime compile Java in the Camel DSL. A compiled simple language is also on the roadmap.\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:106
#, no-wrap
msgid "Optimized components startup"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:110
#, no-wrap
msgid ""
"The camel core has been optimized in Camel 3 to be small, slim, and fast on startup. This benefits Camel Quarkus which\n"
"can do built time optimizations that take advantage of the optimized camel core.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:114
#, no-wrap
msgid ""
"We have continued this effort in the Camel components where whenever possible initialization is moved ahead\n"
"to an earlier phase during startup, that allows enhanced built time optimizations. As there are a lot of Camel\n"
"components then this work will progress over the next couple of Camel releases.\n"
msgstr ""

#. type: Title ###
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:116
#, no-wrap
msgid "New components"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:119
#, no-wrap
msgid "This was a historical slow release in terms of new components. In fact there is only 1 new component:\n"
msgstr ""

#. type: Bullet: '- '
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:121
#, no-wrap
msgid "AWS2-EventBridge: Manage AWS EventBridge cluster instances\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:124
#, no-wrap
msgid ""
"You can read more about the new AWS EventBridge component\n"
"in the [blog announcement](/blog/2020/10/camel-aws2-eventbridge-intro/). \n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:126
#, no-wrap
msgid "Upgrading"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:130
#, no-wrap
msgid ""
"Make sure to read the [upgrade guide](/manual/latest/camel-3x-upgrade-guide-3_6.html) if you\n"
"are upgrading to this release from a previous Camel version.\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:132
#, no-wrap
msgid "Release Notes"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2020/10/Camel36-Whatsnew/index.md:135
#, no-wrap
msgid ""
"You can find more information about this release in the [release notes](/releases/release-3.6.0/),\n"
"with a list of JIRA tickets resolved in the release.\n"
msgstr ""
