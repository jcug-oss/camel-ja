# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2021-05-18 09:36+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: title
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:1
#, no-wrap
msgid "Camel Quarkus Configuration Tips"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:13
#, no-wrap
msgid ""
"Lately, I have exchanged with a member of the Camel community around configuration properties in Camel Quarkus.\n"
"It's really interesting to hear about situations people are facing out there, so please keep reaching out to the community.\n"
"Thinking back about the case at hand, I think there is room for a refresher about some configuration tips.\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:14
#, no-wrap
msgid "Configuration via application.properties file"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:17
#, no-wrap
msgid "Among the multiple ways to define configurations in Camel Quarkus, the more common must be the `application.properties` file, as illustrated below:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:17
#, no-wrap
msgid "basic=a-basic-value\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:23
#, no-wrap
msgid ""
"There are few possibilities for a developer to use the defined configurations.\n"
"One could use the `@ConfigProperty` annotation as beneath:\n"
msgstr ""

#. type: Fenced code block
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:23
#, no-wrap
msgid ""
"@ConfigProperty(name = \"basic\")\n"
"String basicPropertyFromAnnotation;\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:29
#, no-wrap
msgid "It's also possible to access the configuration values programmatically via the following code:\n"
msgstr ""

#. type: Fenced code block
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:29
#, no-wrap
msgid "String basicPropertyFromConfigProvider = ConfigProvider.getConfig().getValue(\"basic\", String.class);\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:34
#, no-wrap
msgid "From the Camel side, the `{{...}}` notation could be issued, for instance, in a simple expression:\n"
msgstr ""

#. type: Fenced code block
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:34
#, no-wrap
msgid "from(...).setBody(simple(\"{{basic}}\"))\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:40
#, no-wrap
msgid ""
"It's worth noting that in a first pass the `application.properties` file is parsed thanks to `java.util.Properties`.\n"
"And as such, the corresponding character escaping rules apply. For instance one could define a configuration using the mathematical square root sign `\\u221A` as beneath:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:40
#, no-wrap
msgid "unicode = a-value-with-unicode-character-(\\u221A9=3)\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:44
#, no-wrap
msgid "Property expressions"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:48
#, no-wrap
msgid ""
"But there is more processing happening in a second pass thanks to [smallrye-common](https://github.com/smallrye/smallrye-common) and it leads to more features.\n"
"For instance, with property expressions one could define a configuration as below:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:48
#, no-wrap
msgid ""
"embedded = resolved-via-a\n"
"property-expression = a-value-${embedded}-property-expression\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:54
#, no-wrap
msgid "Notice how the property from the second line embeds the value from the first line. The resulting value at the end would be `a-value-resolved-via-a-property-expression`.\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:55
#, no-wrap
msgid "Environment variables"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:58
#, no-wrap
msgid "Another topic of interest is environment variable expansion. Look at the following property definition where the USERNAME environment variable is used:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:58
#, no-wrap
msgid "environment-variable = a-value-with-environment-variable-${USERNAME}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:64
#, no-wrap
msgid ""
"So, it is possible to include references to environment variables. In case Camel Quarkus runs in an environment where the variable is not defined,\n"
"it is even feasible to define a default value after the `:` character like this:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:64
#, no-wrap
msgid "environment-variable-or-default = ${UNEXISTING_ENV_VAR:a-default-value}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:69
#, no-wrap
msgid "Last but not least, it's also possible to mix property expressions with environment variables as in the following lines:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:69
#, no-wrap
msgid ""
"default-value = a-default-value-resolved-via-a-property-expression\n"
"envvar-or-default-via-property-expression = ${UNEXISTING_ENV_VAR:${default-value}}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:74
#, no-wrap
msgid "The more meaningful part is `${UNEXISTING_ENV_VAR:${default-value}}`. If the environment variable `UNEXISTING_ENV_VAR` is not defined, we end up embedding the `default-value` configured one line above.\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:75
#, no-wrap
msgid "A tricky situation"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:79
#, no-wrap
msgid ""
"The previous syntax `${VAR:default}` may sound familiar for some Camel users. Indeed, it reminds us of some parts of the [Camel simple language](/components/latest/languages/simple-language.html).\n"
"For instance, some developers could end up defining a property like below:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:79
#, no-wrap
msgid "date-expression = ${date:now}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:83
#, no-wrap
msgid "And then using it in a Camel simple expression like that:\n"
msgstr ""

#. type: Fenced code block
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:83
#, no-wrap
msgid "from(...).setBody(simple(\"{{date-expression}}\")\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:87
#, no-wrap
msgid "But when the simple expression `{{date-expression}}` is evaluated at runtime, the resulting body is... `null`\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:90
#, no-wrap
msgid ""
"It could sound a bit strange at first, but let's review this situation with what we have learned so far.\n"
"On the first pass, the `application.properties` file is parsed with respect to the [Properties file format](https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html). No special characters are used, so the parsing outcome would be `${date:now}` as expected.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:93
#, no-wrap
msgid ""
"But in the second pass, it turns out that this property value is interpreted as the expansion of an environment variable named `date` with a default value. As such, Camel is wrongly provided with the value `now`. The expansion algorithm is detailed in [io.smallrye.common.expression.Expression.parseString(...)](https://github.com/smallrye/smallrye-common/blob/0b59733491ff936808cd26a4b300f11fe3f2a5f0/expression/src/main/java/io/smallrye/common/expression/Expression.java#L245).\n"
"Paying close attention, it appears that the environment value expansion could be avoided using `$$`:\n"
msgstr ""

#. type: Fenced code block (properties)
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:93
#, no-wrap
msgid "date-expression = $${date:now}\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:97
#, no-wrap
msgid "Exactly what we needed, Camel is now provided with the simple expression `${date:now}` and set the body to a value like `Fri Jan 29 17:07:44 CET 2021` on execution.\n"
msgstr ""

#. type: Title ##
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:98
#, no-wrap
msgid "Summary"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:102
#, no-wrap
msgid ""
"At the end of the day, we had a refresher about `application.properties`, property expressions, and environment variables.\n"
"We have seen how to deal with a tricky situation. There must be even more corner cases out there but we hope this article offered some pointers to help.\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:104
#, no-wrap
msgid "The source code for this example could be found [here](https://github.com/aldettinger/camel-quarkus-properties). And, the Quarkus configuration reference guide is located [there](https://quarkus.io/guides/config-reference).\n"
msgstr ""

#. type: Plain text
#: upstream/content/blog/2021/01/camel-quarkus-configuration-tips/index.md:105
#, no-wrap
msgid "Many thanks for reading.\n"
msgstr ""
